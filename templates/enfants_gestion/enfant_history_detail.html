{% extends 'base.html' %}

{% block page_title %}
  Historique du Dossier
{% endblock %}

{% block page_actions %}
    <a href="{% url 'enfants_gestion:enfant_detail' pk=historical_enfant.instance.pk %}" class="btn btn-ghost btn-sm">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" /></svg>
        Retour au dossier actuel
    </a>
{% endblock %}

{% block content %}

<div role="alert" class="alert alert-info mb-6 shadow-md">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
  <div>
    <h3 class="font-bold">Vue Archivée</h3>
    <div class="text-xs">Vous consultez une version du dossier de <strong>{{ historical_enfant.prenom }} {{ historical_enfant.nom }}</strong> telle qu'elle était le {{ historical_enfant.history_date|date:"d/m/Y à H:i" }}.</div>
  </div>
</div>

<div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200">
    <div class="flex items-center gap-4 mb-4">
        <div class="avatar">
          <div class="w-20 rounded-full bg-slate-200 flex items-center justify-center">
              <span class="text-slate-500 text-2xl font-bold">{{ historical_enfant.prenom|first|upper }}{{ historical_enfant.nom|first|upper }}</span>
          </div>
        </div>
        <div>
          <h2 class="text-2xl font-bold text-slate-800">{{ historical_enfant.prenom }} {{ historical_enfant.nom }}</h2>
        </div>
    </div>
      
    <dl class="space-y-3 text-sm">
        <div class="grid grid-cols-3 gap-4 border-t pt-3"><dt class="text-slate-500 col-span-1">Sexe</dt><dd class="font-medium text-slate-700 col-span-2">{{ historical_enfant.get_sexe_display }}</dd></div>
        <div class="grid grid-cols-3 gap-4 border-t pt-3"><dt class="text-slate-500 col-span-1">Date de naissance</dt><dd class="font-medium text-slate-700 col-span-2">{{ historical_enfant.date_naissance|date:"d/m/Y" }}</dd></div>
        <div class="grid grid-cols-3 gap-4 border-t pt-3"><dt class="text-slate-500 col-span-1">Lieu de naissance</dt><dd class="font-medium text-slate-700 col-span-2">{{ historical_enfant.lieu_naissance|default:"N/A" }}</dd></div>
        <div class="grid grid-cols-3 gap-4 border-t pt-3"><dt class="text-slate-500 col-span-1">Statut</dt><dd class="font-medium text-slate-700 col-span-2"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">{{ historical_enfant.get_statut_display }}</span></dd></div>
        <div class="grid grid-cols-3 gap-4 border-t pt-3"><dt class="text-slate-500 col-span-1">Site d'accueil</dt><dd class="font-medium text-slate-700 col-span-2">{{ historical_enfant.site.nom }}</dd></div>
        <div class="grid grid-cols-3 gap-4 border-t pt-3"><dt class="text-slate-500 col-span-1">Date d'arrivée</dt><dd class="font-medium text-slate-700 col-span-2">{{ historical_enfant.date_arrivee|date:"d/m/Y" }}</dd></div>
        <div class="grid grid-cols-3 gap-4 border-t pt-3"><dt class="text-slate-500 col-span-1">Date de départ</dt><dd class="font-medium text-slate-700 col-span-2">{{ historical_enfant.date_depart|date:"d/m/Y"|default:"N/A" }}</dd></div>
        <div class="grid grid-cols-3 gap-4 border-t pt-3"><dt class="text-slate-500 col-span-1">Motif d'admission</dt><dd class="font-medium text-slate-700 col-span-2 prose-sm max-w-none">{{ historical_enfant.motif_admission|linebreaksbr|default:"N/A" }}</dd></div>
        <div class="grid grid-cols-3 gap-4 border-t pt-3"><dt class="text-slate-500 col-span-1">Histoire de l'enfant</dt><dd class="font-medium text-slate-700 col-span-2 prose-sm max-w-none">{{ historical_enfant.histoire|linebreaksbr|default:"N/A" }}</dd></div>
    </dl>
</div>

{% endblock %}