<div x-data="dualSelect()" 
     x-init="init(
        JSON.parse(document.getElementById('sites-options').textContent),
        JSON.parse(document.getElementById('sites-selected').textContent)
     )">

    <label class="label"><span class="label-text text-slate-600 text-xs">{{ field.label }}</span></label>

    <div class="hidden">
        <select multiple name="{{ field.name }}" id="{{ field.id_for_label }}">
            <template x-for="id in chosenIds" :key="id">
                <option :value="id" selected x-text="id"></option>
            </template>
        </select>
    </div>

    <div class="grid grid-cols-2 gap-4">
        <div>
            <div class="text-center text-xs p-1 bg-slate-100 rounded-t-lg border-b">Disponibles</div>
            <div class="border rounded-b-lg bg-slate-50 min-h-[12rem] h-48 overflow-y-auto p-1 space-y-1">
                <template x-for="option in availableOptions" :key="option.id">
                    <button @click.prevent="selectOption(option)" type="button" class="w-full text-left p-2 text-sm rounded-md hover:bg-blue-100 flex justify-between items-center group">
                        <span x-text="option.name" class="truncate"></span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-500 opacity-50 group-hover:opacity-100" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" /></svg>
                    </button>
                </template>
            </div>
        </div>

        <div>
            <div class="text-center text-xs p-1 bg-slate-200 rounded-t-lg border-b">Affect√©s</div>
            <div class="border rounded-b-lg bg-white min-h-[12rem] h-48 overflow-y-auto p-1 space-y-1">
                <template x-for="option in chosenOptions" :key="option.id">
                    <button @click.prevent="deselectOption(option)" type="button" class="w-full text-left p-2 text-sm rounded-md hover:bg-red-100 flex justify-between items-center group">
                        <span x-text="option.name" class="truncate"></span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-red-500 opacity-50 group-hover:opacity-100" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                    </button>
                </template>
            </div>
        </div>
    </div>
</div>